// Array com os caminhos dos arquivos de áudio regulares
const audios = [
    'RADIO/audio/audio1.mp3',
    'RADIO/audio/audio2.mp3',
    'RADIO/audio/audio3.mp3',
    'RADIO/audio/audio4.mp3',
    'RADIO/audio/audio5.mp3',
    'RADIO/audio/audio6.mp3',
    'RADIO/audio/audio7.mp3',
    'RADIO/audio/audio8.mp3',
    'RADIO/audio/audio9.mp3',
    'RADIO/audio/audio10.mp3',
    'RADIO/audio/audio11.mp3',
    'RADIO/audio/audio12.mp3',
    'RADIO/audio/audio13.mp3',
    'RADIO/audio/audio14.mp3',
    'RADIO/audio/audio15.mp3',
    'RADIO/audio/audio16.mp3',
    'RADIO/audio/audio17.mp3',
    'RADIO/audio/audio18.mp3',
    'RADIO/audio/audio19.mp3',
    'RADIO/audio/audio20.mp3',
    'RADIO/audio/audio21.mp3',
    'RADIO/audio/audio22.mp3',
    'RADIO/audio/audio23.mp3',
    'RADIO/audio/audio24.mp3',
    'RADIO/audio/audio25.mp3',
    'RADIO/audio/audio26.mp3',
    'RADIO/audio/audio27.mp3',
    'RADIO/audio/audio28.mp3',
    'RADIO/audio/audio29.mp3',
    'RADIO/audio/audio30.mp3',
    'RADIO/audio/audio31.mp3',
    'RADIO/audio/audio32.mp3',
    'RADIO/audio/audio33.mp3',
    'RADIO/audio/audio34.mp3',
    'RADIO/audio/audio35.mp3',
    'RADIO/audio/audio36.mp3',
    'RADIO/audio/audio37.mp3',
    'RADIO/audio/audio38.mp3',
    'RADIO/audio/audio39.mp3',
    'RADIO/audio/audio40.mp3',
    'RADIO/audio/audio41.mp3',
    'RADIO/audio/audio42.mp3',
    'RADIO/audio/audio43.mp3',
    'RADIO/audio/audio44.mp3',
    'RADIO/audio/audio45.mp3',
    'RADIO/audio/audio46.mp3',
    'RADIO/audio/audio47.mp3',
    'RADIO/audio/audio48.mp3',
    'RADIO/audio/audio49.mp3',
    'RADIO/audio/audio50.mp3',
    'RADIO/audio/audio51.mp3',
    'RADIO/audio/audio52.mp3',
    'RADIO/audio/audio53.mp3',
    'RADIO/audio/audio54.mp3',
    'RADIO/audio/audio55.mp3',
    'RADIO/audio/audio56.mp3',
    'RADIO/audio/audio57.mp3',
    'RADIO/audio/audio58.mp3',
    'RADIO/audio/audio59.mp3',
    'RADIO/audio/audio60.mp3',
    'RADIO/audio/audio61.mp3',
    'RADIO/audio/audio62.mp3',
    'RADIO/audio/audio63.mp3',
    'RADIO/audio/audio64.mp3',
    'RADIO/audio/audio65.mp3',
    'RADIO/audio/audio66.mp3',
    'RADIO/audio/audio67.mp3',
    'RADIO/audio/audio68.mp3',
    'RADIO/audio/audio69.mp3',
    'RADIO/audio/audio70.mp3',
    'RADIO/audio/audio71.mp3',
    'RADIO/audio/audio72.mp3',
    'RADIO/audio/audio73.mp3',
    'RADIO/audio/audio74.mp3',
    'RADIO/audio/audio75.mp3',
    'RADIO/audio/audio76.mp3',
    'RADIO/audio/audio77.mp3',
    'RADIO/audio/audio78.mp3',
    'RADIO/audio/audio79.mp3',
    'RADIO/audio/audio80.mp3',
    'RADIO/audio/audio81.mp3',
    'RADIO/audio/audio82.mp3',
    'RADIO/audio/audio83.mp3',
    'RADIO/audio/audio84.mp3',
    'RADIO/audio/audio85.mp3',
    'RADIO/audio/audio86.mp3',
    'RADIO/audio/audio87.mp3',
    'RADIO/audio/audio88.mp3',
    'RADIO/audio/audio89.mp3',
    'RADIO/audio/audio90.mp3',
    'RADIO/audio/audio91.mp3',
    'RADIO/audio/audio92.mp3',
    'RADIO/audio/audio93.mp3',
    'RADIO/audio/audio94.mp3',
    'RADIO/audio/audio95.mp3',
    'RADIO/audio/audio96.mp3',
    'RADIO/audio/audio97.mp3',
    'RADIO/audio/audio98.mp3',
    'RADIO/audio/audio99.mp3',
    'RADIO/audio/audio100.mp3',
    'RADIO/audio/audio101.mp3',
    'RADIO/audio/audio102.mp3',
    'RADIO/audio/audio103.mp3',
    'RADIO/audio/audio104.mp3',
    'RADIO/audio/audio105.mp3',
    'RADIO/audio/audio106.mp3',
    'RADIO/audio/audio107.mp3',
    'RADIO/audio/audio108.mp3',
    'RADIO/audio/audio109.mp3',
    'RADIO/audio/audio110.mp3',
    'RADIO/audio/audio111.mp3',
    'RADIO/audio/audio112.mp3',
    'RADIO/audio/audio113.mp3',
    'RADIO/audio/audio114.mp3',
    'RADIO/audio/audio115.mp3',
    'RADIO/audio/audio116.mp3',
    'RADIO/audio/audio117.mp3',
    'RADIO/audio/audio118.mp3',
    'RADIO/audio/audio119.mp3',
    'RADIO/audio/audio120.mp3',
    'RADIO/audio/audio121.mp3',
    'RADIO/audio/audio122.mp3',
    'RADIO/audio/audio123.mp3',
    'RADIO/audio/audio124.mp3',
    'RADIO/audio/audio125.mp3',
    'RADIO/audio/audio126.mp3',
    'RADIO/audio/audio127.mp3',
    'RADIO/audio/audio128.mp3',
    'RADIO/audio/audio129.mp3',
    'RADIO/audio/audio130.mp3',
    'RADIO/audio/audio131.mp3',
    'RADIO/audio/audio132.mp3',
    'RADIO/audio/audio133.mp3',
    'RADIO/audio/audio134.mp3',
    'RADIO/audio/audio135.mp3',
    'RADIO/audio/audio136.mp3',
    'RADIO/audio/audio137.mp3',
    'RADIO/audio/audio138.mp3',
    'RADIO/audio/audio139.mp3',
    'RADIO/audio/audio140.mp3',
    'RADIO/audio/audio141.mp3',
    'RADIO/audio/audio142.mp3',
    'RADIO/audio/audio143.mp3',
    'RADIO/audio/audio144.mp3',
    'RADIO/audio/audio145.mp3',
    'RADIO/audio/audio146.mp3',
    'RADIO/audio/audio147.mp3',
    'RADIO/audio/audio148.mp3',
    'RADIO/audio/audio149.mp3',
    'RADIO/audio/audio150.mp3',
    'RADIO/audio/audio151.mp3',
    'RADIO/audio/audio152.mp3',
    'RADIO/audio/audio153.mp3',
    'RADIO/audio/audio154.mp3',
    'RADIO/audio/audio155.mp3',
    'RADIO/audio/audio156.mp3',
    'RADIO/audio/audio157.mp3',
    'RADIO/audio/audio158.mp3',
    'RADIO/audio/audio159.mp3',
    'RADIO/audio/audio160.mp3',
    'RADIO/audio/audio161.mp3',
    'RADIO/audio/audio162.mp3',
    'RADIO/audio/audio163.mp3',
    'RADIO/audio/audio164.mp3',
    'RADIO/audio/audio165.mp3',
    'RADIO/audio/audio166.mp3',
    'RADIO/audio/audio167.mp3',
    'RADIO/audio/audio168.mp3',
    'RADIO/audio/audio169.mp3',
    'RADIO/audio/audio170.mp3',
    'RADIO/audio/audio171.mp3',
    'RADIO/audio/audio172.mp3',
    'RADIO/audio/audio173.mp3',
    'RADIO/audio/audio174.mp3',
    'RADIO/audio/audio175.mp3',
    'RADIO/audio/audio176.mp3',
    'RADIO/audio/audio177.mp3',
    'RADIO/audio/audio178.mp3',
    'RADIO/audio/audio179.mp3',
    'RADIO/audio/audio180.mp3',
    'RADIO/audio/audio181.mp3',
    'RADIO/audio/audio182.mp3',
    'RADIO/audio/audio183.mp3',
    'RADIO/audio/audio184.mp3',
    'RADIO/audio/audio185.mp3',
    'RADIO/audio/audio186.mp3',
    'RADIO/audio/audio187.mp3',
    'RADIO/audio/audio188.mp3',
    'RADIO/audio/audio189.mp3',
    'RADIO/audio/audio190.mp3',
    'RADIO/audio/audio191.mp3',
    'RADIO/audio/audio192.mp3',
    'RADIO/audio/audio193.mp3',
    'RADIO/audio/audio194.mp3',
    'RADIO/audio/audio195.mp3',
    'RADIO/audio/audio196.mp3',
    'RADIO/audio/audio197.mp3',
    'RADIO/audio/audio198.mp3',
    'RADIO/audio/audio199.mp3',
    'RADIO/audio/audio200.mp3',
    'RADIO/audio/audio201.mp3',
    'RADIO/audio/audio202.mp3'
];

// Array com os caminhos dos arquivos de áudio das ofertas
const offerAudios = [
    'RADIO/audio/audio6_oferta1.mp3',
    'RADIO/audio/audio12_oferta2.mp3',
    'RADIO/audio/audio18_oferta3.mp3',
    'RADIO/audio/audio24_oferta4.mp3',
    'RADIO/audio/audio30_oferta5.mp3',
    'RADIO/audio/audio36_oferta6.mp3'
];

let currentAudioIndex = 0;
let playCount = 0; // Conta o número de músicas tocadas
let offerAudioIndex = 0; // Índice para controlar a sequência das ofertas
let playedAudios = []; // Array para armazenar os áudios já tocados
const audioPlayer = document.getElementById('audioPlayer');
const progressBar = document.getElementById('progressBar');
const audioBars = document.querySelectorAll('.audio-bar'); // Selecione todas as barras de áudio

// Função para carregar e tocar uma música aleatória
function playRandomAudio() {
    let audioSource;

    // Se tivermos tocado 5 músicas, escolhemos uma oferta (seguindo a sequência)
    if (playCount % 5 === 0 && playCount !== 0) {
        // Toca o próximo áudio da lista de ofertas
        audioSource = offerAudios[offerAudioIndex];
        offerAudioIndex = (offerAudioIndex + 1) % offerAudios.length; // Move para o próximo áudio de oferta
    } else {
        // Escolher um áudio aleatório da lista de áudios regulares, sem repetição
        let randomAudioIndex;
        do {
            randomAudioIndex = Math.floor(Math.random() * audios.length);
        } while (playedAudios.includes(randomAudioIndex)); // Verifica se o áudio já foi tocado recentemente

        audioSource = audios[randomAudioIndex];
        playedAudios.push(randomAudioIndex); // Armazena o áudio tocado

        // Limita o histórico de áudios tocados para evitar que o array cresça indefinidamente
        if (playedAudios.length > 5) {
            playedAudios.shift(); // Remove o primeiro elemento do histórico (o mais antigo)
        }
    }

    // Atualiza o índice e carrega a música
    audioPlayer.src = audioSource;
    audioPlayer.play();
    playCount++; // Incrementa o contador de músicas tocadas

    startBarsAnimation(); // Inicia a animação das barras
}

// Função para iniciar a animação das barras
function startBarsAnimation() {
    audioBars.forEach(bar => {
        bar.classList.add('bounce'); // Começa a animação das barras
    });
}

// Função para parar a animação das barras
function stopBarsAnimation() {
    audioBars.forEach(bar => {
        bar.classList.remove('bounce'); // Remove a animação das barras
    });
}

// Evento para o botão de "Play" quando a página carrega
window.onload = function() {
    playRandomAudio(); // Toca a primeira música (aleatória)
};

// Atualizar a barra de progresso conforme a música vai tocando
audioPlayer.addEventListener('timeupdate', function() {
    const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
    progressBar.value = progress;
});

// Ao terminar o áudio, escolhe um novo áudio aleatório
audioPlayer.addEventListener('ended', function() {
    playRandomAudio();
});

// Pausa a música e para a animação
audioPlayer.addEventListener('pause', function() {
    stopBarsAnimation();
});

// Inicia o primeiro áudio ao carregar a página
audioPlayer.src = audios[currentAudioIndex];
audioPlayer.play();
